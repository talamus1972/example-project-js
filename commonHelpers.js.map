{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/js/pagination.js","../src/js/searchForm.js","../src/js/events.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://app.ticketmaster.com/discovery/v2/';\nconst API_KEY = 'uHSLi07StIOlriMPxJGxUbSYsHDs6AFx';\n\nexport async function fetchEvents(page, keyword) {\n  const response = await axios.get(\n    `${BASE_URL}events.json?apikey=${API_KEY}&page=${page}&keyword=${keyword}`\n  );\n  return response.data;\n}\nasync function fetchEventId(id) {\n  const response = await axios.get(\n    `${BASE_URL}events.json?apikey=${API_KEY}&id=${id}`\n  );\n  return response.data;\n}\n","import Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport { renderEvents } from './events';\n\nconst options = {\n  totalItems: 0,\n  itemsPerPage: 20,\n  visiblePages: 3,\n  page: 1,\n  centerAlign: false,\n  firstItemClassName: 'tui-first-child',\n  lastItemClassName: 'tui-last-child',\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n    currentPage:\n      '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n    moveButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</span>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n      '<span class=\"tui-ico-ellip\">...</span>' +\n      '</a>',\n  },\n};\n\nconst pagination = new Pagination('pagination', options);\n\nexport const page = pagination.getCurrentPage();\n\nexport function reset(totalItems) {\n  pagination.reset(totalItems);\n}\n\npagination.on('afterMove', event => {\n  const currentPage = event.page;\n  renderEvents(currentPage);\n  console.log(currentPage);\n});\n","import { renderEvents } from './events';\nimport { page } from './pagination';\n\nconst form = document.querySelector('.form');\n\nexport let keyword = '';\n\nform.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  keyword = form.elements.searchInput.value.trim();\n  renderEvents(page, keyword);\n}\n","import { fetchEvents } from './api.js';\nimport { page, reset } from './pagination.js';\nimport { keyword } from './searchForm.js';\n\nconst eventsList = document.querySelector('.events-list');\n\nfunction createMarkup(events) {\n  const markup = events\n    .map(\n      ({ name, id }) => `\n  <li id=\"${id}\">\n  <p id=\"${id}\">${name} </p>\n  </li>`\n    )\n    .join('');\n  eventsList.innerHTML = markup;\n}\n\nexport async function renderEvents(page, keyword) {\n  try {\n    const data = await fetchEvents(page, keyword);\n    if (!data.page.totalElements) {\n      alert('Not find');\n    }\n\n    if (page === 1) {\n      reset(data.page.totalElements);\n    }\n    createMarkup(data._embedded.events);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nrenderEvents(page, keyword);\n"],"names":["BASE_URL","API_KEY","fetchEvents","page","keyword","axios","options","pagination","Pagination","reset","totalItems","event","currentPage","renderEvents","form","handleSubmit","eventsList","createMarkup","events","markup","name","id","data","error"],"mappings":"6vBAEA,MAAMA,EAAW,6CACXC,EAAU,mCAET,eAAeC,EAAYC,EAAMC,EAAS,CAI/C,OAHiB,MAAMC,EAAM,IAC3B,GAAGL,uBAA8BC,UAAgBE,aAAgBC,GACrE,GACkB,IAClB,CCNA,MAAME,EAAU,CACd,WAAY,EACZ,aAAc,GACd,aAAc,EACd,KAAM,EACN,YAAa,GACb,mBAAoB,kBACpB,kBAAmB,iBACnB,SAAU,CACR,KAAM,gDACN,YACE,iEACF,WACE,mGAGF,mBACE,gHAGF,WACE,mGAGH,CACH,EAEMC,EAAa,IAAIC,EAAW,aAAcF,CAAO,EAE1CH,EAAOI,EAAW,iBAExB,SAASE,EAAMC,EAAY,CAChCH,EAAW,MAAMG,CAAU,CAC7B,CAEAH,EAAW,GAAG,YAAaI,GAAS,CAClC,MAAMC,EAAcD,EAAM,KAC1BE,EAAaD,CAAW,EACxB,QAAQ,IAAIA,CAAW,CACzB,CAAC,ECxCD,MAAME,EAAO,SAAS,cAAc,OAAO,EAEpC,IAAIV,EAAU,GAErBU,EAAK,iBAAiB,SAAUC,CAAY,EAE5C,SAASA,EAAaJ,EAAO,CAC3BA,EAAM,eAAc,EACpBP,EAAUU,EAAK,SAAS,YAAY,MAAM,KAAI,EAC9CD,EAAaV,EAAMC,CAAO,CAC5B,CCTA,MAAMY,EAAa,SAAS,cAAc,cAAc,EAExD,SAASC,EAAaC,EAAQ,CAC5B,MAAMC,EAASD,EACZ,IACC,CAAC,CAAE,KAAAE,EAAM,GAAAC,CAAE,IAAO;AAAA,YACZA;AAAA,WACDA,MAAOD;AAAA,QAEb,EACA,KAAK,EAAE,EACVJ,EAAW,UAAYG,CACzB,CAEO,eAAeN,EAAaV,EAAMC,EAAS,CAChD,GAAI,CACF,MAAMkB,EAAO,MAAMpB,EAAYC,EAAMC,CAAO,EACvCkB,EAAK,KAAK,eACb,MAAM,UAAU,EAGdnB,IAAS,GACXM,EAAMa,EAAK,KAAK,aAAa,EAE/BL,EAAaK,EAAK,UAAU,MAAM,CACnC,OAAQC,EAAP,CACA,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEAV,EAAaV,EAAMC,CAAO"}