{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/js/pagination.js","../src/js/searchForm.js","../src/js/events.js","../src/js/modal.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://app.ticketmaster.com/discovery/v2/';\nconst API_KEY = 'uHSLi07StIOlriMPxJGxUbSYsHDs6AFx';\n\nexport async function fetchEvents(page, keyword) {\n  const response = await axios.get(\n    `${BASE_URL}events.json?apikey=${API_KEY}&page=${page}&keyword=${keyword}`\n  );\n  return response.data;\n}\nexport async function fetchEventId(id) {\n  const response = await axios.get(\n    `${BASE_URL}events.json?apikey=${API_KEY}&id=${id}`\n  );\n  return response.data;\n}\n","import Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport { renderEvents } from './events';\n\nconst options = {\n  totalItems: 0,\n  itemsPerPage: 20,\n  visiblePages: 3,\n  page: 1,\n  centerAlign: false,\n  firstItemClassName: 'tui-first-child',\n  lastItemClassName: 'tui-last-child',\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n    currentPage:\n      '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n    moveButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</span>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n      '<span class=\"tui-ico-ellip\">...</span>' +\n      '</a>',\n  },\n};\n\nconst pagination = new Pagination('pagination', options);\n\nexport const page = pagination.getCurrentPage();\n\nexport function reset(totalItems) {\n  pagination.reset(totalItems);\n}\n\npagination.on('afterMove', event => {\n  const currentPage = event.page;\n  renderEvents(currentPage);\n  console.log(currentPage);\n});\n","import { renderEvents } from './events';\nimport { page } from './pagination';\n\nconst form = document.querySelector('.form');\n\nexport let keyword = '';\n\nform.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  keyword = form.elements.searchInput.value.trim();\n  renderEvents(page, keyword);\n}\n","import { fetchEvents } from './api.js';\nimport { page, reset } from './pagination.js';\nimport { keyword } from './searchForm.js';\n\nexport const eventsList = document.querySelector('.events-list');\n\nfunction createMarkup(events) {\n  const markup = events\n    .map(\n      ({ name, id }) => `\n  <li id=\"${id}\">\n  <p id=\"${id}\">${name} </p>\n  </li>`\n    )\n    .join('');\n  eventsList.innerHTML = markup;\n}\n\nexport async function renderEvents(page, keyword) {\n  try {\n    const data = await fetchEvents(page, keyword);\n    if (!data.page.totalElements) {\n      alert('Not find');\n    }\n\n    if (page === 1) {\n      reset(data.page.totalElements);\n    }\n    createMarkup(data._embedded.events);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nrenderEvents(page, keyword);\n","import { eventsList } from './events';\nimport { fetchEventId } from './api';\n\nconst modal = document.querySelector('.modal');\nconst backdrop = document.querySelector('.backdrop');\neventsList.addEventListener('click', findEvent);\n\nfunction findEvent(event) {\n  const eventId = event.target.id;\n  if (eventId) {\n    backdrop.classList.remove('is-hidden');\n    getEvent(eventId);\n  }\n}\n\nfunction renderModal(data) {\n  const markup = `\n<img src=\"${data[0].images[0].url}\" width=\"200\" height=\"200\" />\n<p>${data[0].name}</p>\n<p>${data[0].info || ''}</p>\n`;\n  modal.innerHTML = markup;\n}\n\nasync function getEvent(eventId) {\n  try {\n    const data = await fetchEventId(eventId);\n    console.log(data._embedded.events);\n    renderModal(data._embedded.events);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nbackdrop.addEventListener('click', () => {\n  backdrop.classList.add('is-hidden');\n});\n"],"names":["BASE_URL","API_KEY","fetchEvents","page","keyword","axios","fetchEventId","id","options","pagination","Pagination","reset","totalItems","event","currentPage","renderEvents","form","handleSubmit","eventsList","createMarkup","events","markup","name","data","error","modal","backdrop","findEvent","eventId","getEvent","renderModal"],"mappings":"6vBAEA,MAAMA,EAAW,6CACXC,EAAU,mCAET,eAAeC,EAAYC,EAAMC,EAAS,CAI/C,OAHiB,MAAMC,EAAM,IAC3B,GAAGL,uBAA8BC,UAAgBE,aAAgBC,GACrE,GACkB,IAClB,CACO,eAAeE,EAAaC,EAAI,CAIrC,OAHiB,MAAMF,EAAM,IAC3B,GAAGL,uBAA8BC,QAAcM,GACnD,GACkB,IAClB,CCZA,MAAMC,EAAU,CACd,WAAY,EACZ,aAAc,GACd,aAAc,EACd,KAAM,EACN,YAAa,GACb,mBAAoB,kBACpB,kBAAmB,iBACnB,SAAU,CACR,KAAM,gDACN,YACE,iEACF,WACE,mGAGF,mBACE,gHAGF,WACE,mGAGH,CACH,EAEMC,EAAa,IAAIC,EAAW,aAAcF,CAAO,EAE1CL,EAAOM,EAAW,iBAExB,SAASE,EAAMC,EAAY,CAChCH,EAAW,MAAMG,CAAU,CAC7B,CAEAH,EAAW,GAAG,YAAaI,GAAS,CAClC,MAAMC,EAAcD,EAAM,KAC1BE,EAAaD,CAAW,EACxB,QAAQ,IAAIA,CAAW,CACzB,CAAC,ECxCD,MAAME,EAAO,SAAS,cAAc,OAAO,EAEpC,IAAIZ,EAAU,GAErBY,EAAK,iBAAiB,SAAUC,CAAY,EAE5C,SAASA,EAAaJ,EAAO,CAC3BA,EAAM,eAAc,EACpBT,EAAUY,EAAK,SAAS,YAAY,MAAM,KAAI,EAC9CD,EAAaZ,EAAMC,CAAO,CAC5B,CCTO,MAAMc,EAAa,SAAS,cAAc,cAAc,EAE/D,SAASC,EAAaC,EAAQ,CAC5B,MAAMC,EAASD,EACZ,IACC,CAAC,CAAE,KAAAE,EAAM,GAAAf,CAAE,IAAO;AAAA,YACZA;AAAA,WACDA,MAAOe;AAAA,QAEb,EACA,KAAK,EAAE,EACVJ,EAAW,UAAYG,CACzB,CAEO,eAAeN,EAAaZ,EAAMC,EAAS,CAChD,GAAI,CACF,MAAMmB,EAAO,MAAMrB,EAAYC,EAAMC,CAAO,EACvCmB,EAAK,KAAK,eACb,MAAM,UAAU,EAGdpB,IAAS,GACXQ,EAAMY,EAAK,KAAK,aAAa,EAE/BJ,EAAaI,EAAK,UAAU,MAAM,CACnC,OAAQC,EAAP,CACA,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEAT,EAAaZ,EAAMC,CAAO,EC/B1B,MAAMqB,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAW,SAAS,cAAc,WAAW,EACnDR,EAAW,iBAAiB,QAASS,CAAS,EAE9C,SAASA,EAAUd,EAAO,CACxB,MAAMe,EAAUf,EAAM,OAAO,GACzBe,IACFF,EAAS,UAAU,OAAO,WAAW,EACrCG,EAASD,CAAO,EAEpB,CAEA,SAASE,EAAYP,EAAM,CACzB,MAAMF,EAAS;AAAA,YACLE,EAAK,GAAG,OAAO,GAAG;AAAA,KACzBA,EAAK,GAAG;AAAA,KACRA,EAAK,GAAG,MAAQ;AAAA,EAEnBE,EAAM,UAAYJ,CACpB,CAEA,eAAeQ,EAASD,EAAS,CAC/B,GAAI,CACF,MAAML,EAAO,MAAMjB,EAAasB,CAAO,EACvC,QAAQ,IAAIL,EAAK,UAAU,MAAM,EACjCO,EAAYP,EAAK,UAAU,MAAM,CAClC,OAAQC,EAAP,CACA,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEAE,EAAS,iBAAiB,QAAS,IAAM,CACvCA,EAAS,UAAU,IAAI,WAAW,CACpC,CAAC"}